<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Units Battlegrounds Compendium</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <div class="max-w-7xl mx-auto p-4 sm:p-8">
        <header class="relative flex flex-col justify-center items-center mb-8">
            <!-- Dark Mode Toggle Button -->
            <button id="darkModeToggle" class="absolute top-0 right-0 p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-300">
                <i id="darkModeIcon" class="fas fa-moon text-gray-800 dark:text-white"></i>
            </button>

            <div class="flex flex-col items-center">
                <!-- Updated image source to the publicly hosted URL -->
                <img src="https://tr.rbxcdn.com/180DAY-03e365f1fea92684ef841ae041d4677e/150/150/Image/Webp/noFilter"
                     alt="Units Battlegrounds Logo"
                     class="header-image rounded-full shadow-md">
                <h1 id="mainTitle" class="text-4xl font-extrabold mt-4 text-center">Units Battlegrounds Compendium</h1>
            </div>

            <!-- Tab Navigation -->
            <nav class="w-full flex justify-center space-x-2 sm:space-x-4 mt-8" role="tablist">
                <button id="unitsTab" role="tab" aria-selected="true" class="tab-button active">Units</button>
                <button id="modsTab" role="tab" aria-selected="false" class="tab-button">Mods</button>
                <button id="tierListTab" role="tab" aria-selected="false" class="tab-button">Tier List</button>
            </nav>
        </header>

        <main class="mt-8">
            <!-- Units Section -->
            <section id="unitsSection" class="tab-content">
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 items-center justify-between mb-6">
                    <!-- Search and filters -->
                    <div class="w-full sm:w-auto">
                        <input type="text" id="searchInput" placeholder="Search for a unit..." class="w-full sm:w-64 p-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:outline-none">
                    </div>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                        <select id="rarityFilter" class="p-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-gray-100">
                            <option value="All">All Rarity</option>
                        </select>
                        <select id="classFilter" class="p-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-gray-100">
                            <option value="All">All Class</option>
                        </select>
                    </div>

                    <!-- Global Max Level Toggle -->
                    <div class="flex items-center space-x-2 p-2 rounded-lg bg-gray-200 dark:bg-gray-800">
                        <label for="toggleMaxLevel" class="text-sm font-medium text-gray-900 dark:text-gray-100">Max Level Stats</label>
                        <input type="checkbox" id="toggleMaxLevel" class="toggle-switch">
                    </div>
                </div>

                <!-- Loading Spinner -->
                <div id="loadingSpinner" class="hidden flex justify-center items-center h-64">
                    <div class="spinner"></div>
                </div>

                <!-- Unit Table -->
                <div id="unitTableContainer" class="overflow-x-auto rounded-xl shadow-md hidden">
                    <table id="unitTable" class="min-w-full">
                        <thead class="bg-blue-600 dark:bg-blue-800 text-white">
                            <tr>
                                <th class="cursor-pointer" data-sort="UnitName">Unit <i class="fas fa-sort-alpha-down-alt ml-1"></i></th>
                                <th class="cursor-pointer responsive-hide" data-sort="Rarity">Rarity <i class="fas fa-sort-alpha-down-alt ml-1"></i></th>
                                <th class="cursor-pointer responsive-hide-sm" data-sort="Class">Class <i class="fas fa-sort-alpha-down-alt ml-1"></i></th>
                                <th class="cursor-pointer" data-sort="Damage">Damage <i class="fas fa-sort-alpha-down-alt ml-1"></i></th>
                                <th class="cursor-pointer" data-sort="HP">HP <i class="fas fa-sort-alpha-down-alt ml-1"></i></th>
                                <th class="cursor-pointer responsive-hide" data-sort="DPS">DPS <i class="fas fa-sort-alpha-down-alt ml-1"></i></th>
                                <th class="cursor-pointer responsive-hide" data-sort="Range">Range <i class="fas fa-sort-alpha-down-alt ml-1"></i></th>
                                <th class="cursor-pointer" data-sort="AttackSpeed">Speed <i class="fas fa-sort-alpha-down-alt ml-1"></i></th>
                            </tr>
                        </thead>
                        <tbody id="unitTableBody" class="bg-white divide-y divide-gray-200 dark:bg-gray-700 dark:divide-gray-600">
                            <!-- Unit data will be inserted here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Mods Section -->
            <section id="modsSection" class="tab-content hidden">
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 items-center justify-between mb-6">
                    <div class="w-full sm:w-auto">
                        <input type="text" id="modSearchInput" placeholder="Search for a mod..." class="w-full sm:w-64 p-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:outline-none">
                    </div>
                </div>
                <div id="modTableContainer" class="overflow-x-auto rounded-xl shadow-md hidden mt-6">
                    <table id="modTable" class="min-w-full">
                        <thead class="bg-blue-600 dark:bg-blue-800 text-white">
                            <tr>
                                <th class="py-3 px-6 text-left text-xs font-medium text-gray-50 uppercase tracking-wider">ModName</th>
                                <th class="py-3 px-6 text-left text-xs font-medium text-gray-50 uppercase tracking-wider">Effect</th>
                                <th class="py-3 px-6 text-left text-xs font-medium text-gray-50 uppercase tracking-wider">Description</th>
                            </tr>
                        </thead>
                        <tbody id="modTableBody" class="bg-white divide-y divide-gray-200 dark:bg-gray-700 dark:divide-gray-600">
                            <!-- Mod data will be inserted here by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <p id="noModsMessage" class="text-center text-gray-600 dark:text-gray-400 mt-4 hidden">Failed to load mods data or no data available.</p>
            </section>

            <!-- Tier List Section -->
            <section id="tierListSection" class="tab-content hidden">
                <div id="tierListTableContainer" class="overflow-x-auto rounded-xl shadow-md hidden mt-6">
                    <table id="tierListTable" class="min-w-full">
                        <thead class="bg-blue-600 dark:bg-blue-800 text-white">
                            <tr>
                                <th class="py-3 px-6 text-left text-xs font-medium text-gray-50 uppercase tracking-wider">UnitName</th>
                                <th class="py-3 px-6 text-left text-xs font-medium text-gray-50 uppercase tracking-wider">Tier</th>
                                <th class="py-3 px-6 text-left text-xs font-medium text-gray-50 uppercase tracking-wider">NumericalRank</th>
                                <th class="py-3 px-6 text-left text-xs font-medium text-gray-50 uppercase tracking-wider">Notes</th>
                            </tr>
                        </thead>
                        <tbody id="tierListTableBody" class="bg-white divide-y divide-gray-200 dark:bg-gray-700 dark:divide-gray-600">
                            <!-- Tier list data will be inserted here by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <p id="noTierListMessage" class="text-center text-gray-600 dark:text-gray-400 mt-4 hidden">Failed to load tier list data or no data available.</p>
            </section>
        </main>
    </div>

    <!-- Main JavaScript file -->
    <script type="module" src="js/script.js"></script>
</body>
</html>
